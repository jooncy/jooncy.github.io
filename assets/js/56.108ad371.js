(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{176:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("介绍")]),t._v(" "),a("p",[t._v("Kafka是一种高吞吐量的"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F/19276232",target:"_blank",rel:"noopener noreferrer"}},[t._v("分布式"),a("OutboundLink")],1),t._v("发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据。它提供类似JMS的特性，但并不是JMS规范的实现。")]),t._v(" "),a("p",[t._v("kafka对消息保存时根据Topic进行归类，发送消息者成为Producer，消息接受者成为Consumer,此外kafka集群有多个kafka实例组成，每个实例("),a("a",{attrs:{href:"http://cpro.baidu.com/cpro/ui/uijs.php?rs=1&u=http%3A%2F%2Fwww%2Eaboutyun%2Ecom%2Fthread%2D9341%2D1%2D1%2Ehtml&p=baidu&c=news&n=10&t=tpclicked3_hc&q=92051019_cpr&k=server&k0=java&kdi0=8&k1=%B1%E0%B3%CC&kdi1=8&k2=%BF%CD%BB%A7%B6%CB&kdi2=8&k3=%C9%E8%BC%C6&kdi3=8&k4=server&kdi4=1&sid=4ebca4a25f27e407&ch=0&tu=u1692056&jk=fb2f0911808fa875&cf=29&fv=14&stid=9&urlid=0&luki=5&seller_id=1&di=128",target:"_blank",rel:"noopener noreferrer"}},[t._v("server"),a("OutboundLink")],1),t._v(")成为broker。无论是kafka集群，还是producer和consumer都依赖于zookeeper来保证系统可用性集群保存一些meta信息。")])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("安装方式：")]),t._v(" "),t._m(16),t._v(" "),a("p",[t._v("版本：")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"kafka-原理剖析与最佳实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-原理剖析与最佳实践","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka 原理剖析与最佳实践")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"消息系统与kafka背景介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#消息系统与kafka背景介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" 消息系统与Kafka背景介绍")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"开局一张图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开局一张图","aria-hidden":"true"}},[this._v("#")]),this._v(" 开局一张图")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"http://kafka.apache.org/images/kafka_diagram.png",alt:"img"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"相关术语"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关术语","aria-hidden":"true"}},[this._v("#")]),this._v(" 相关术语")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("Broker，Kafka集群包含一个或多个服务器，这种服务器被称为broker")]),t._v(" "),a("li",[t._v("Topic，每条发布到Kafka集群的消息都有一个类别，这个类别被称为Topic。（物理上不同Topic的消息分开存储，逻辑上一个Topic的消息虽然保存于一个或多个broker上但用户只需指定消息的Topic即可生产或消费数据而不必关心数据存于何处）")]),t._v(" "),a("li",[t._v("Partition，是物理上的概念，每个Topic包含一个或多个Partition.")]),t._v(" "),a("li",[t._v("Producer，负责发布消息到Kafka broker")]),t._v(" "),a("li",[t._v("Consumer，向Kafka broker读取消息的客户端。")]),t._v(" "),a("li",[t._v("Consumer Group，每个Consumer属于一个特定的Consumer Group（可为每个Consumer指定group name，若不指定group name则属于默认的group）。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"消息系统分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#消息系统分类","aria-hidden":"true"}},[this._v("#")]),this._v(" 消息系统分类")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("Peer-to-Peer\n"),a("ul",[a("li",[t._v("一般基于pull或者polling接收消息")]),t._v(" "),a("li",[t._v("发送到队列中的消息被一个而且仅仅一个接受者，及时有多个接收者在同一个队列中侦听同一消息。")])])]),t._v(" "),a("li",[t._v("发布/订阅\n"),a("ul",[a("li",[t._v("发布到一个主题的消息，可以被多个订阅者所接收")]),t._v(" "),a("li",[t._v("发布/订阅即可基于Push消费数据，也可以基于Pull & polling 接收消息")]),t._v(" "),a("li",[t._v("解耦能力比 P-to-P 模型更强")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),e("p",[this._v("P2P 模型和发布/订阅的区别在于，一个是排队窗口买票，一个是用软件买票")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"消息系统适用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#消息系统适用场景","aria-hidden":"true"}},[this._v("#")]),this._v(" 消息系统适用场景")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("解耦，系统之间通过消息系统这个同意的接口交换数据，无需了解彼此的存在")]),t._v(" "),a("li",[t._v("冗余，部分消息系统具有消息持久化能力，可规避消息处理前丢失的风险")]),t._v(" "),a("li",[t._v("扩展，消息系统是同意的数据接口，各系统可独立扩展")]),t._v(" "),a("li",[t._v("峰值能力处理，详细系统可叮嘱峰值流量，业务系统可根据处理能力从消息系统中获取处理对应量的请求")]),t._v(" "),a("li",[t._v("可恢复性，系统中部分组件失效并不会影响整个系统，它恢复后任然可从消息系统中获取并处理数据")]),t._v(" "),a("li",[t._v("异步通信，在不需要立即处理请求的场景下，可以将请求放入消息系统，合适的时候再处理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"常用消息系统对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用消息系统对比","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用消息系统对比")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("RabbitMQ Erlang编写，支持多协议AMQP，XMQP，XMPP，SMTP，STOMP，支持负载均衡和数据持久化，同时支持P-2-P和发布/订阅模式。")]),t._v(" "),a("li",[t._v("Redis 基于Key-Value的nosql数据库，同时支持MQ功能，可做轻量级队列服务 使用，就入队操作而言，Redis对短消息（小于10KB）的性能比RabbitMQ好，长消息比RabbitMQ差。")]),t._v(" "),a("li",[t._v("ZeroMQ 轻量级，不需要单独的消息服务器中间件，应用程序本身扮演该角色 P-2-P。它实际上是一个库，需要开发人员自己组合多种技术，使用复杂度高。")]),t._v(" "),a("li",[t._v("ActiveMQ JMS实现，P-2-P ，支持持久化，XA事务")]),t._v(" "),a("li",[t._v("Kafka/Jafka 高性能跨语言的风不是发布/订阅消息西戎，数据持久化，全分布式，同时支持在线和离线处理")]),t._v(" "),a("li",[t._v("MetaQ/RocketMQ 纯JAVA实现，发布/订阅消息系统，支持本地事务和XA分布式事务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"kafka-设计目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-设计目标","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka 设计目标")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("高吞吐率，在廉价的商用机器上单机可支持100W条消息的读写（虚拟机测试）")]),this._v(" "),e("li",[this._v("消息持久化，所有消息被持久化到磁盘，五消息丢失，支持消息重放")]),this._v(" "),e("li",[this._v("完全风不是，Producer，Broker，Consumer均支持水平扩展")]),this._v(" "),e("li",[this._v("同时满足适应在线流处理和离线批处理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"kafka-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-安装","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka 安装")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("二进制安装，kafka 本身自带 zookeeper 使用脚本启动即可，适用于单点部署方式")]),this._v(" "),e("li",[this._v("Docker 部署 kafka")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("jdk-1.8")]),this._v(" "),e("li",[this._v("kafka-2.11")]),this._v(" "),e("li",[this._v("zookeeper-3.5.5")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"图-1：kafka-集群架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图-1：kafka-集群架构","aria-hidden":"true"}},[this._v("#")]),this._v(" 图-1：kafka 集群架构")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1558615206983&di=6b3d142023102343fdb7583b63de4bed&imgtype=0&src=http%3A%2F%2Fimage20.it168.com%2F201505_800x800%2F2189%2F9012c5bdf94e017b.jpg",alt:"img"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"二进制方式下载安装-kafka-zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二进制方式下载安装-kafka-zookeeper","aria-hidden":"true"}},[this._v("#")]),this._v(" 二进制方式下载安装 Kafka & zookeeper")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ wget http://mirror.bit.edu.cn/apache/kafka/2.2.0/kafka_2.11-2.2.0.tgz\n$ https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.5.5/apache-zookeeper-3.5.5-bin.tar.gz\n$ tar xf kafka_2.11-2.2.0.tgz -C /opt/\n$ cd /opt/kafka_2.11-2.2.0/bin\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"图-2：进入bin目录后可以看到相关的启动脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图-2：进入bin目录后可以看到相关的启动脚本","aria-hidden":"true"}},[this._v("#")]),this._v(" 图-2：进入"),e("code",[this._v("bin")]),this._v("目录后可以看到相关的启动脚本")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/linux/server/kafka/1558605890791.png",alt:"1558605890791"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"kafka-基本操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-基本操作","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka 基本操作")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"kafka-启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-启动","aria-hidden":"true"}},[this._v("#")]),this._v(" kafka 启动")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ nohup bin/zookeeper-server-start.sh config/zookeeper.properties &  \n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"zookeeper-启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-启动","aria-hidden":"true"}},[this._v("#")]),this._v(" zookeeper 启动")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ nohup bin/kafka-server-start.sh config/server.properties &     //使用自带的zookeeper启动\n$ tar xf apache-zookeeper-3.5.5-bin.tar.gz -C /opt && cd /opt/apache-zookeeper-3.5.5-bin\n$ mv conf/zoo_sample.cfg conf/zoo.cfg \n$ bin/zkServer.sh start   \n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"图-3：查看监听端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图-3：查看监听端口","aria-hidden":"true"}},[this._v("#")]),this._v(" 图-3：查看监听端口")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/linux/server/kafka/1558606622199.png",alt:"1558606622199"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"topic-操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#topic-操作","aria-hidden":"true"}},[this._v("#")]),this._v(" Topic 操作")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ bin/kafka-topics.sh --zookeeper localhost:2181 --create --topic test1 --partitions 3 --replication-factor 1\n$ bin/kafka-topics.sh --zookeeper localhost:2181 --describe --topic test1   \nTopic:test1\tPartitionCount:3\tReplicationFactor:1\tConfigs:\n\tTopic: test1\tPartition: 0\tLeader: 0\tReplicas: 0\tIsr: 0\n\tTopic: test1\tPartition: 1\tLeader: 0\tReplicas: 0\tIsr: 0\n\tTopic: test1\tPartition: 2\tLeader: 0\tReplicas: 0\tIsr: 0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"consumer-操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#consumer-操作","aria-hidden":"true"}},[this._v("#")]),this._v(" Consumer 操作")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test1    //创建消费者\n$ bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test1       //客户端发送消息\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"docker-安装部署-kafka-zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装部署-kafka-zookeeper","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker 安装部署 kafka & zookeeper")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"kafka"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka","aria-hidden":"true"}},[this._v("#")]),this._v(" kafka")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('FROM centos:7\n\nENV KAFKA_VERSION "0.8.2.2"\n\nRUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip\n\nRUN mkdir /opt/java &&\\\n\twget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java\n\nRUN mkdir /opt/kafka &&\\\n\twget http://apache.fayea.com/kafka/$KAFKA_VERSION/kafka_2.11-$KAFKA_VERSION.tgz -P /opt/kafka\n\nRUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &&\\\n\tJAVA_HOME=/opt/java/jdk1.8.0_102 &&\\\n\tsed -i "/^PATH/i export JAVA_HOME=$JAVA_HOME" /root/.bash_profile &&\\\n\tsed -i "s%^PATH.*$%&:$JAVA_HOME/bin%g" /root/.bash_profile &&\\\n\tsource /root/.bash_profile\n\nRUN tar zxvf /opt/kafka/kafka*.tgz -C /opt/kafka &&\\\n\tsed -i \'s/num.partitions.*$/num.partitions=3/g\' /opt/kafka/kafka_2.11-$KAFKA_VERSION/config/server.properties\n\nRUN echo "source /root/.bash_profile" > /opt/kafka/start.sh &&\\\n\techo "cd /opt/kafka/kafka_2.11-"$KAFKA_VERSION >> /opt/kafka/start.sh &&\\\n\techo "sed -i \'s%zookeeper.connect=.*$%zookeeper.connect=zookeeper:2181%g\'  /opt/kafka/kafka_2.11-"$KAFKA_VERSION"/config/server.properties" >> /opt/kafka/start.sh &&\\\n\techo "bin/kafka-server-start.sh config/server.properties" >> /opt/kafka/start.sh &&\\\n\tchmod a+x /opt/kafka/start.sh\n\nEXPOSE 9092\n\nENTRYPOINT ["sh", "/opt/kafka/start.sh"]\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"zookeeper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper","aria-hidden":"true"}},[this._v("#")]),this._v(" zookeeper")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('FROM centos:7\n\nRUN yum -y install vim lsof wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel pwgen python-pip\n\nRUN mkdir /opt/java &&\\\n\twget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u102-b14/jdk-8u102-linux-x64.tar.gz -P /opt/java\n\nRUN tar zxvf /opt/java/jdk-8u102-linux-x64.tar.gz -C /opt/java &&\\\n\tJAVA_HOME=/opt/java/jdk1.8.0_102 &&\\\n\tsed -i "/^PATH/i export JAVA_HOME=$JAVA_HOME" /root/.bash_profile &&\\\n\tsed -i "s%^PATH.*$%&:$JAVA_HOME/bin%g" /root/.bash_profile &&\\\n\tsource /root/.bash_profile\n\nENV ZOOKEEPER_VERSION "3.4.6"\n\nRUN mkdir /opt/zookeeper &&\\\n\twget http://mirror.olnevhost.net/pub/apache/zookeeper/zookeeper-$ZOOKEEPER_VERSION/zookeeper-$ZOOKEEPER_VERSION.tar.gz -P /opt/zookeeper\n\nRUN tar zxvf /opt/zookeeper/zookeeper*.tar.gz -C /opt/zookeeper\n\nRUN echo "source /root/.bash_profile" > /opt/zookeeper/start.sh &&\\\n\techo "cp /opt/zookeeper/zookeeper-"$ZOOKEEPER_VERSION"/conf/zoo_sample.cfg /opt/zookeeper/zookeeper-"$ZOOKEEPER_VERSION"/conf/zoo.cfg" >> /opt/zookeeper/start.sh &&\\\n\techo "/opt/zookeeper/zookeeper-$"ZOOKEEPER_VERSION"/bin/zkServer.sh start-foreground" >> /opt/zookeeper/start.sh\n\nEXPOSE 2181\n\nENTRYPOINT ["sh", "/opt/zookeeper/start.sh"]\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br")])])}],!1,null,null,null);e.default=r.exports}}]);